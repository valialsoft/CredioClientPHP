<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: g Pages: 1 -->
<svg width="874pt" height="288pt"
 viewBox="0.00 0.00 874.26 288.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 284)">
<title>g</title>
<polygon fill="none" stroke="none" points="-4,4 -4,-284 870.262,-284 870.262,4 -4,4"/>
<text text-anchor="middle" x="433.131" y="-258.4" font-family="Times,serif" font-size="22.00">SSO Portal Credentials Authentication with Cookie</text>
<g id="clust1" class="cluster"><title>cluster0</title>
<path fill="#aabbcc" fill-opacity="0.866667" stroke="black" d="M20,-127C20,-127 319.947,-127 319.947,-127 325.947,-127 331.947,-133 331.947,-139 331.947,-139 331.947,-228 331.947,-228 331.947,-234 325.947,-240 319.947,-240 319.947,-240 20,-240 20,-240 14,-240 8,-234 8,-228 8,-228 8,-139 8,-139 8,-133 14,-127 20,-127"/>
<text text-anchor="middle" x="272.447" y="-223.2" font-family="Times,serif" font-size="16.00">External system</text>
</g>
<!-- web_app -->
<g id="node1" class="node"><title>web_app</title>
<polygon fill="white" stroke="black" points="324.5,-36 254.5,-36 254.5,-0 324.5,-0 324.5,-36"/>
<text text-anchor="middle" x="289.5" y="-14.3" font-family="Times,serif" font-size="14.00">Web App</text>
</g>
<!-- web_app&#45;&gt;web_app -->
<g id="edge4" class="edge"><title>web_app&#45;&gt;web_app</title>
<path fill="none" stroke="blue" d="M264.535,-36.1527C260.694,-45.5391 269.016,-54 289.5,-54 301.983,-54 309.949,-50.8581 313.399,-46.2796"/>
<polygon fill="blue" stroke="blue" points="316.899,-46.4643 314.465,-36.1527 309.937,-45.7311 316.899,-46.4643"/>
<text text-anchor="middle" x="289.5" y="-57.8" font-family="Times,serif" font-size="14.00">(6) save token to cookie</text>
</g>
<!-- have_token -->
<g id="node2" class="node"><title>have_token</title>
<polygon fill="white" stroke="black" points="725.631,-74 584.869,-56 725.631,-38 866.393,-56 725.631,-74"/>
<text text-anchor="middle" x="725.631" y="-52.3" font-family="Times,serif" font-size="14.00">have cookie with token ?</text>
</g>
<!-- web_app&#45;&gt;have_token -->
<g id="edge1" class="edge"><title>web_app&#45;&gt;have_token</title>
<path fill="none" stroke="blue" d="M324.578,-24.3588C343.494,-27.6808 367.483,-31.5529 389,-34 461.698,-42.2678 543.634,-47.7126 608.351,-51.1171"/>
<polygon fill="blue" stroke="blue" points="608.418,-54.6252 618.586,-51.6461 608.78,-47.6345 608.418,-54.6252"/>
<text text-anchor="middle" x="478" y="-52.8" font-family="Times,serif" font-size="14.00">(1) check cookie</text>
</g>
<!-- have_token&#45;&gt;web_app -->
<g id="edge2" class="edge"><title>have_token&#45;&gt;web_app</title>
<path fill="none" stroke="green" d="M685.982,-43.0003C654.398,-33.097 608.372,-20.2923 567,-15 488.528,-4.96172 468.102,-13.7957 389,-15 371.292,-15.2696 351.799,-15.8117 334.861,-16.3618"/>
<polygon fill="green" stroke="green" points="334.56,-12.8698 324.683,-16.703 334.795,-19.8659 334.56,-12.8698"/>
<text text-anchor="middle" x="478" y="-18.8" font-family="Times,serif" font-size="14.00">(2.1) yes; use token from cookie</text>
</g>
<!-- sso_portal -->
<g id="node3" class="node"><title>sso_portal</title>
<polygon fill="white" stroke="black" points="93,-171 16,-171 16,-135 93,-135 93,-171"/>
<text text-anchor="middle" x="54.5" y="-149.3" font-family="Times,serif" font-size="14.00">SSO Portal</text>
</g>
<!-- have_token&#45;&gt;sso_portal -->
<g id="edge3" class="edge"><title>have_token&#45;&gt;sso_portal</title>
<path fill="none" stroke="red" d="M644.402,-63.6342C520.836,-75.6252 289.678,-99.0455 208,-114 172.378,-120.522 132.77,-130.743 102.85,-139.085"/>
<polygon fill="red" stroke="red" points="101.77,-135.753 93.0938,-141.834 103.668,-142.49 101.77,-135.753"/>
<text text-anchor="middle" x="289.5" y="-117.8" font-family="Times,serif" font-size="14.00">(2.2) no; redirect to sso portal</text>
</g>
<!-- sso_portal&#45;&gt;web_app -->
<g id="edge5" class="edge"><title>sso_portal&#45;&gt;web_app</title>
<path fill="none" stroke="green" d="M64.2543,-134.871C73.5589,-117.418 89.8449,-91.4583 111,-76 150.718,-46.9778 205.71,-31.9833 243.917,-24.5836"/>
<polygon fill="green" stroke="green" points="245.018,-27.9401 254.222,-22.6925 243.754,-21.0551 245.018,-27.9401"/>
<text text-anchor="middle" x="150.5" y="-79.8" font-family="Times,serif" font-size="14.00">(5) token</text>
</g>
<!-- credio -->
<g id="node4" class="node"><title>credio</title>
<ellipse fill="white" stroke="black" cx="289.5" cy="-172" rx="34.394" ry="34.394"/>
<text text-anchor="middle" x="289.5" y="-168.3" font-family="Times,serif" font-size="14.00">Credio</text>
</g>
<!-- sso_portal&#45;&gt;credio -->
<g id="edge6" class="edge"><title>sso_portal&#45;&gt;credio</title>
<path fill="none" stroke="green" d="M103.504,-151.345C129.214,-150.965 161.394,-151.3 190,-154 211.98,-156.074 236.393,-160.52 255.416,-164.475"/>
<polygon fill="green" stroke="green" points="103.205,-147.85 93.2726,-151.538 103.337,-154.848 103.205,-147.85"/>
<text text-anchor="middle" x="150.5" y="-157.8" font-family="Times,serif" font-size="14.00">(4) token</text>
</g>
<!-- credio&#45;&gt;sso_portal -->
<g id="edge7" class="edge"><title>credio&#45;&gt;sso_portal</title>
<path fill="none" stroke="blue" d="M244.727,-174.45C208.638,-175.708 156.219,-175.778 111,-169 105.149,-168.123 99.0469,-166.8 93.1204,-165.284"/>
<polygon fill="blue" stroke="blue" points="245.06,-177.94 254.914,-174.048 244.784,-170.945 245.06,-177.94"/>
<text text-anchor="middle" x="150.5" y="-177.8" font-family="Times,serif" font-size="14.00">(3) credentials</text>
</g>
</g>
</svg>
